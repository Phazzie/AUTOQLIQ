# AutoQliq Workflow Execution Process

This document explains how workflows are executed in AutoQliq, from the user interface to the underlying WebDriver.

## High-Level Execution Flow

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │     │                 │
│  User Interface │────►│ Workflow Runner │────►│ Action Executor │────►│   Web Browser   │
│                 │     │                 │     │                 │     │                 │
└─────────────────┘     └─────────────────┘     └─────────────────┘     └─────────────────┘
        ▲                       │                       │                       │
        │                       │                       │                       │
        └───────────────────────┴───────────────────────┴───────────────────────┘
                                      Results Flow Back
```

## Detailed Execution Process

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                               User Interface (UI)                               │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ User selects and runs workflow
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                           Application Services Layer                            │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Load workflow from repository
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Workflow Runner                                    │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Initialize WebDriver
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              WebDriver Factory                                  │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Create browser instance
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                           Browser (Chrome, Firefox, etc.)                       │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Browser ready for automation
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                         Execute Actions Sequentially                            │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ For each action in workflow
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Action Execution                                   │
│                                                                                 │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐   │
│  │             │     │             │     │             │     │             │   │
│  │  Action 1   │────►│  Action 2   │────►│  Action 3   │────►│  Action N   │   │
│  │             │     │             │     │             │     │             │   │
│  └─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘   │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Collect results
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                             Results Collection                                  │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Return results to UI
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                           Display Results to User                               │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Action Execution Details

Each action follows this execution pattern:

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Action Execution                                   │
│                                                                                 │
└───────────────────────────────┬─────────────────────────────────────────────────┘
                                │
                                │ 1. Validate action parameters
                                ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                           Parameter Validation                                  │
│                                                                                 │
└───────────────────────────────┬─────────────────────────────────────────────────┘
                                │
                                │ 2. Prepare WebDriver commands
                                ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                          WebDriver Command Preparation                          │
│                                                                                 │
└───────────────────────────────┬─────────────────────────────────────────────────┘
                                │
                                │ 3. Execute WebDriver commands
                                ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                          WebDriver Command Execution                            │
│                                                                                 │
└───────────────────────────────┬─────────────────────────────────────────────────┘
                                │
                                │ 4. Handle errors (if any)
                                ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Error Handling                                     │
│                                                                                 │
└───────────────────────────────┬─────────────────────────────────────────────────┘
                                │
                                │ 5. Create result object
                                ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Result Creation                                    │
│                                                                                 │
└───────────────────────────────┬─────────────────────────────────────────────────┘
                                │
                                │ 6. Return result
                                ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Action Result                                      │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Advanced Action Execution

For advanced actions like Conditional, Loop, and Error Handling, the execution flow includes additional logic:

### Conditional Action

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                           Conditional Action                                    │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Evaluate condition
                                    ▼
                          ┌─────────────────────┐
                          │                     │
                          │  Condition Result   │
                          │                     │
                          └──────────┬──────────┘
                                    /\
                                   /  \
                                  /    \
                          True   /      \   False
                                /        \
                               ▼          ▼
          ┌─────────────────────────┐    ┌─────────────────────────┐
          │                         │    │                         │
          │     Execute TRUE        │    │     Execute FALSE       │
          │       Branch            │    │       Branch            │
          │                         │    │                         │
          └─────────────────────────┘    └─────────────────────────┘
```

### Loop Action

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                              Loop Action                                        │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Initialize loop
                                    ▼
                          ┌─────────────────────┐
                          │                     │
                          │  Loop Condition     │◄────────────┐
                          │                     │             │
                          └──────────┬──────────┘             │
                                    /\                        │
                                   /  \                       │
                                  /    \                      │
                         Continue/      \  Exit               │
                                /        \                    │
                               ▼          ▼                   │
          ┌─────────────────────────┐    ┌─────────────────┐  │
          │                         │    │                 │  │
          │  Execute Loop Actions   │    │   Loop Done     │  │
          │                         │    │                 │  │
          └─────────────┬───────────┘    └─────────────────┘  │
                        │                                     │
                        └─────────────────────────────────────┘
```

### Error Handling Action

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                          Error Handling Action                                  │
│                                                                                 │
└───────────────────────────────────┬─────────────────────────────────────────────┘
                                    │
                                    │ Execute try block
                                    ▼
                          ┌─────────────────────┐
                          │                     │
                          │   Try Block         │
                          │                     │
                          └──────────┬──────────┘
                                    /\
                                   /  \
                                  /    \
                         Success /      \  Error
                                /        \
                               ▼          ▼
          ┌─────────────────────────┐    ┌─────────────────────────┐
          │                         │    │                         │
          │      Continue           │    │   Execute Catch Block   │
          │                         │    │                         │
          └─────────────────────────┘    └─────────────────────────┘
```

## Workflow Execution Lifecycle

1. **Initialization**
   - User selects workflow
   - Workflow is loaded from repository
   - WebDriver is initialized
   - Browser is launched

2. **Execution**
   - Actions are executed sequentially
   - Each action interacts with the browser
   - Results are collected

3. **Completion**
   - Final results are aggregated
   - Browser is closed
   - Results are displayed to user

4. **Reporting**
   - Execution log is saved
   - Screenshots are available for review
   - Errors are reported if any occurred

This visualization helps understand how AutoQliq executes workflows and how the different components interact with each other.
